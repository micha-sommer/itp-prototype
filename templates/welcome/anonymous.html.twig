{% extends 'base.html.twig' %}

{% block title %}{{ 'welcome.title'|trans }}{% endblock %}

{% block body %}
    <div class="container">
        <div class="p-5 mb-4 bg-light rounded-3">
            <h1 class="display-4">{{ 'welcome.greeting'|trans }}</h1>
            <p class="lead">{{ 'welcome.active'|trans({'year':year}) }}</p>
            <hr class="my-4">
            <figure class="figure">
                {% for country in countries %}
                    <img src="{{ asset('images/Flag_of_%s.svg'|format(country)) }}"
                         class="rounded float-left mb-2 ml-2" height="50" alt="{{ country }}">
                {% endfor %}
            </figure>
            <hr class="my-2">
            <h4>{{ 'welcome.overview.limit.contestants'|trans }}</h4>
            <div class="progress" style="height: 20px; --bs-progress-bg: white">
                {% set capacity = ((contestant_limit - contestant.getCurrentLimit)/contestant_limit*100)|round %}
                {% set barColor = capacity > 90 ? "bg-danger" : capacity > 75 ? "bg-warning" : "bg-success" %}
                <div class="progress-bar {{ barColor }}" style="width: {{ capacity }}%; --bs-progress-bg: white" role="progressbar"
                     aria-valuenow="{{ contestant_limit - contestant.getCurrentLimit }}" aria-valuemin="0" aria-valuemax="{{ contestant_limit }}"
                     aria-label="{{ 'welcome.overview.limit.contestants'|trans }}">
                    {{ contestant_limit - contestant.getCurrentLimit }}
                </div>
            </div>
            <p class="mt-2">{{ 'welcome.contestants'|trans({'total':categories['total'],'clubs':clubsCount})|raw }}</p>
            <div class="card-group">
                <div class="card text-bg-dark">
                    <div class="card-body">
                        <h5 class="card-title">{{ 'welcome.overview.age-category.cadet'|trans }}</h5>
                        <h5><span class="badge bg-primary">{{ categories['cadet']['total'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory':'cadet', 'weightCategory':'-40'}) }}">-40</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['cadet']['-40'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory': 'cadet', 'weightCategory':'-44'}) }}">-44</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['cadet']['-44'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory': 'cadet', 'weightCategory':'-48'}) }}">-48</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['cadet']['-48'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory': 'cadet', 'weightCategory':'-52'}) }}">-52</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['cadet']['-52'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory': 'cadet', 'weightCategory':'-57'}) }}">-57</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['cadet']['-57'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory': 'cadet', 'weightCategory':'-63'}) }}">-63</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['cadet']['-63'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory': 'cadet', 'weightCategory':'-70'}) }}">-70</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['cadet']['-70'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory': 'cadet', 'weightCategory':'+70'}) }}">+70</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['cadet']['+70'] }}</span></h5>
                    </div>
                </div>
            </div>
            <div class="card-group">
                <div class="card text-bg-dark">
                    <div class="card-body">
                        <h5 class="card-title">{{ 'welcome.overview.age-category.junior'|trans }}</h5>
                        <h5><span class="badge bg-primary">{{ categories['junior']['total'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory':'junior', 'weightCategory':'-44'}) }}">-44</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['junior']['-44'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory':'junior', 'weightCategory':'-48'}) }}">-48</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['junior']['-48'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory':'junior', 'weightCategory':'-52'}) }}">-52</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['junior']['-52'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory':'junior', 'weightCategory':'-57'}) }}">-57</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['junior']['-57'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory':'junior', 'weightCategory':'-63'}) }}">-63</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['junior']['-63'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory':'junior', 'weightCategory':'-70'}) }}">-70</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['junior']['-70'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory':'junior', 'weightCategory':'-78'}) }}">-78</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['junior']['-78'] }}</span></h5>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="{{ path('category_overview', {'ageCategory':'junior', 'weightCategory':'+78'}) }}">+78</a>
                        </h5>
                        <h5><span class="badge bg-primary">{{ categories['junior']['+78'] }}</span></h5>
                    </div>
                </div>
            </div>
            <hr class="my-4">
            <h4>{{ 'welcome.overview.limit.accommodation'|trans }}</h4>
            <div class="progress" style="height: 20px; --bs-progress-bg: white">
                {% set capacity = ((accommodation_limit - accommodation.getCurrentLimit)/accommodation_limit*100)|round %}
                {% set barColor = capacity > 90 ? "bg-danger" : capacity > 75 ? "bg-warning" : "bg-success" %}
                <div class="progress-bar {{ barColor }}" style="width: {{ capacity }}%; --bs-progress-bg: white" role="progressbar"
                     aria-valuenow="{{ accommodation_limit - accommodation.getCurrentLimit }}" aria-valuemin="0" aria-valuemax="{{ accommodation_limit }}"
                     aria-label="{{ 'welcome.overview.limit.contestants'|trans }}">
                    {{ accommodation_limit - accommodation.getCurrentLimit }}
                </div>
            </div>
            <hr class="my-4">
            <p>{{ 'welcome.contact-us'|trans }}</p>
            <p>Thüringer Judo-Verband e.V.<br/>
                Schützenstraße 4<br/>
                99096 Erfurt<br/>
                <a class="fa fa-phone" href="tel:0049-0361-3731647"> +49 (0) 361 373 16 47</a><br/>
                <a class="fa fa-envelope" href="mailto:info@thueringer-judoverband.de">
                    info@thueringer-judoverband.de</a><br/>
            </p>
        </div>
    </div>
{% endblock %}
